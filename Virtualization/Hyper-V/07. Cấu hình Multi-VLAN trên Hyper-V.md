# Hướng dẫn cấu hình Multi-VLAN trên Hyper-V với NIC Teaming

## 1. Giới thiệu
Hướng dẫn này giúp cấu hình nhiều VLAN trên Hyper-V bằng cách sử dụng **NIC Teaming** để gộp các card mạng vật lý và gán VLAN riêng cho từng card mạng ảo.

## 2. Yêu cầu
- Windows Server với Hyper-V đã cài đặt.
- Tối thiểu 2 card mạng vật lý (NIC) trên máy chủ.
- Switch hỗ trợ VLAN (nếu sử dụng chế độ LACP).

## 3. Các bước thực hiện

### Bước 1: Tạo NIC Teaming trên Hyper-V Host
1. **Mở Server Manager**:
    - Vào **Server Manager** > **Local Server**.
    - Trong phần **NIC Teaming**, chọn **Disabled** để mở trình quản lý NIC Teaming.

![image](https://github.com/user-attachments/assets/85cf806c-8309-4cf8-a0f6-0b09d04edaf0)

2. **Tạo NIC Team**:
    - Chọn **Tasks** > **New Team**.
      
![image](https://github.com/user-attachments/assets/82050458-caf2-4c02-9762-113f426cdf1b)

    - Chọn các NIC vật lý để gộp vào team (ví dụ: `NIC1`, `NIC3`).
    - Đặt tên cho NIC Team, ví dụ: `MultiVLAN Network`.
    
![image](https://github.com/user-attachments/assets/f1000de4-41db-4cd5-aee4-e157a8a1f3ef)


3. **Cấu hình Teaming Mode và Load Balancing**:
    - **Teaming Mode**: Chọn **Switch Independent** hoặc **LACP** (nếu switch hỗ trợ).
    - **Load Balancing Mode**: Chọn **Dynamic**.

4. **Lưu cấu hình** để tạo NIC Team.

### Bước 2: Tạo Virtual NICs cho từng VLAN
1. Trong cửa sổ NIC Teaming, chọn **Properties** của `NIC_Team_VLAN`.
2. Chuyển sang tab **VLAN** và tạo Virtual NIC cho từng VLAN.
    - **Virtual NIC cho VLAN 10**:
        - Đặt tên: `NIC_VLAN10`.
        - VLAN ID: `10`.
    - **Virtual NIC cho VLAN 20**:
        - Đặt tên: `NIC_VLAN20`.
        - VLAN ID: `20`.

![image](https://github.com/user-attachments/assets/a81f4597-ad4d-4950-ad0d-8c031745cadd)

### Bước 3: Cấu hình Hyper-V Virtual Switch
1. Chạy câu lệnh trên để tạo Virtual Switch cho Vlan 10 và Vlan 20
   
![image](https://github.com/user-attachments/assets/0e093a6b-bbd6-4024-97ae-3c1e764c3f22)


### Bước 4: Gán Virtual NIC cho các máy ảo
1. Mở **Hyper-V Manager** và chọn máy ảo cần cấu hình.
2. Chọn **Settings** của máy ảo, vào phần **Network Adapter**.
3. Chọn Virtual Switch tương ứng (ví dụ: **Switch_VLAN10** hoặc **Switch_VLAN20**).
